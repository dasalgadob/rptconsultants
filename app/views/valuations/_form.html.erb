
    <% case locals[:submit_string] %>
    <% when "Crear"%>
    <% form_var = [@company, @valuation] %>
    <% when "Editar"%>
    <% form_var = @valuation %>
    <% end %>


<% if locals[:submit_string] == 'Editar' %>
<script type="text/javascript">
    //console.log("Antes de actualizar");
    $.get( "/valuations/<%= @valuation.id%>.json")
        .done(function( data ) {
          console.log("loading Valuation...");
          valuation = data;
          //$('#valuation_position_type_id').val(position_type['id']).trigger('change');
          //Luego del cambio de options escoger las debidas

        });
    //console.log("Despues de actualizar");
</script>
  <% end %>


<%= form_for(form_var) do |f| %>
  <% if @valuation.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@valuation.errors.count, "error", plural="errores") %> impidieron a esta valoraci贸n de ser guaradada:</h2>

      <ul>
      <% @valuation.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field form-group">
    <%= f.label "Area" %>
    <%= select_tag "area", options_from_collection_for_select(@areas, "id", "name", !@valuation.new_record? ? @valuation.job_title.area.id: ""), options = {:include_blank => true, class: 'form-control'} %>
  </div>


  <div class="field form-group">
    <%= f.label "Cargo" %>
    <%= f.select :job_title_id , options_for_select([]),{ :include_blank => true },{ class: 'form-control'} %>
    <% if locals[:submit_string] == 'Editar' %>
    <script type="text/javascript">
      var job_title= null;
      $.get( "/job_titles/<%= @job_title.id%>.json")
          .done(function( data ) {
            console.log("loading Job Title...");
            job_title = data;
          });
    </script>
    <% end %>

  </div>



  <div class="field form-group">
    <%= f.label "Tipo de posici贸n" %>
    <%= f.select :position_type_id, options_for_select(@position_types.map{ |pt| [pt.name.upcase, pt.id]}),{ :include_blank => true, selected: @valuation.position_type },{ class: 'form-control'} %>
  </div>
  <% if locals[:submit_string] == 'Editar' %>
  <script type="text/javascript">
    var position_type= null;
    $.get( "/position_types/<%= @position_type.id%>.json")
        .done(function( data ) {
          console.log("loading Position Type...");
          position_type = data;
          $('#valuation_position_type_id').val(position_type['id']).trigger('change');
          //Luego del cambio de options escoger las debidas

        });
    //console.log("Antes de actualizar");
    $.get( "/valuations/<%= @valuation.id%>.json")
        .done(function( data ) {
          console.log("loading Valuation...");
          valuation = data;
          //$('#valuation_position_type_id').val(position_type['id']).trigger('change');
          //Luego del cambio de options escoger las debidas

        });
    //console.log("Despues de actualizar");
  </script>
  <% end %>

  <div class="field form-group">
    <%= f.label "Amplitud y profundidad del conocimiento aplicado" %>
    <%= f.select :knowledge_id, options_for_select([]),{ :include_blank => true },{ class: 'form-control valuation_criteria'} %>
    <p id="valuation_knowledge_id_text"></p>
  </div>

  <div class="field form-group">
    <%= f.label "Actuaci贸n (Habilidades)" %>
    <%= f.select :skill_id, options_for_select([]),{ :include_blank => true },{ class: 'form-control valuation_criteria'} %>
    <p id="valuation_skill_id_text"></p>
  </div>

  <div class="field form-group">
    <%= f.label "Definiciones y Supervisi贸n" %>
    <%= f.select :definition_supervision_id, options_for_select([]),{ :include_blank => true },{ class: 'form-control valuation_criteria'} %>
    <p id="valuation_definition_supervision_id_text"></p>
  </div>

  <div class="field form-group">
    <%= f.label "Riesgos asumidos y nivel de decisiones" %>
    <%= f.select :risk_decision_id, options_for_select([]),{ :include_blank => true },{ class: 'form-control valuation_criteria'} %>
    <p id="valuation_risk_decision_id_text"></p>
  </div>

  <div class="field form-group">
    <%= f.label "Sostenibilidad (Tiempo)" %>
    <%= f.select :sustainability_id, options_for_select([]),{ :include_blank => true },{ class: 'form-control valuation_criteria'} %>
    <p id="valuation_sustainability_id_text"></p>
  </div>

  <div class="field form-group">
    <%= f.label "Area de Responsabilidad" %>
    <%= f.select :area_impact_id, options_for_select([]),{ :include_blank => true },{ class: 'form-control valuation_criteria'} %>
    <p id="valuation_area_impact_id_text"></p>
  </div>

  <div class="field form-group">
    <%= f.label "Influencia en los resultados" %>
    <%= f.select :influence_id, options_for_select([]),{ :include_blank => true },{ class: 'form-control valuation_criteria'} %>
    <p id="valuation_influence_id_text"></p>
  </div>

  <div class="field form-group">
    <%= f.label "Puntaje" %>
    <%= f.number_field :score, {class: 'form-control', readonly: 'true'} %>
  </div>

  <div class="field form-group">
    <%= f.label "Grado" %>
    <%= f.select :degree_id,options_for_select(@degrees.map{ |d| [d.number, d.id]}),{ :include_blank => true },{ class: 'form-control', readonly: 'true'} %>
  </div>

  <div class="actions">
    <%= f.submit locals[:submit_string], class: 'btn btn-success', id: 'submit'%>
  </div>
<% end %>
